# Comparing `tmp/siat-2.3.0-py3-none-any.whl.zip` & `tmp/siat-2.3.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,10 +1,10 @@
-Zip file size: 1709171 bytes, number of entries: 124
+Zip file size: 1714578 bytes, number of entries: 126
 -rw-rw-rw-  2.0 fat      840 b- defN 23-Apr-10 11:29 siat/__init__.py
--rw-rw-rw-  2.0 fat     2209 b- defN 23-Jul-09 11:17 siat/allin.py
+-rw-rw-rw-  2.0 fat     2210 b- defN 23-Jul-12 15:22 siat/allin.py
 -rw-rw-rw-  2.0 fat      747 b- defN 23-Apr-10 11:29 siat/alpha_vantage_test.py
 -rw-rw-rw-  2.0 fat    28555 b- defN 23-Apr-10 11:29 siat/assets_liquidity.py
 -rw-rw-rw-  2.0 fat     1285 b- defN 23-Apr-10 11:29 siat/assets_liquidity_test.py
 -rw-rw-rw-  2.0 fat    10110 b- defN 23-Apr-10 11:29 siat/barrons_scraping_test.py
 -rw-rw-rw-  2.0 fat    36597 b- defN 23-Apr-10 11:29 siat/beta_adjustment.py
 -rw-rw-rw-  2.0 fat    20433 b- defN 23-Apr-10 11:29 siat/beta_adjustment_china.py
 -rw-rw-rw-  2.0 fat     2467 b- defN 23-Apr-10 11:29 siat/beta_adjustment_test.py
@@ -12,15 +12,15 @@
 -rw-rw-rw-  2.0 fat    99528 b- defN 23-Jun-03 12:59 siat/bond.py
 -rw-rw-rw-  2.0 fat    24155 b- defN 23-Apr-10 11:29 siat/bond_base.py
 -rw-rw-rw-  2.0 fat     3002 b- defN 23-May-25 13:09 siat/bond_china.py
 -rw-rw-rw-  2.0 fat     5246 b- defN 23-Apr-10 11:29 siat/bond_test.py
 -rw-rw-rw-  2.0 fat    28499 b- defN 23-Apr-10 11:29 siat/capm_beta.py
 -rw-rw-rw-  2.0 fat     1745 b- defN 23-Apr-10 11:29 siat/capm_beta_test.py
 -rw-rw-rw-  2.0 fat    38116 b- defN 23-Apr-10 11:29 siat/cmat_commons.py
--rw-rw-rw-  2.0 fat    65280 b- defN 23-May-25 13:08 siat/common.py
+-rw-rw-rw-  2.0 fat    65384 b- defN 23-Jul-12 15:10 siat/common.py
 -rw-rw-rw-  2.0 fat    20806 b- defN 23-Apr-11 14:17 siat/compare_cross.py
 -rw-rw-rw-  2.0 fat     3473 b- defN 23-Apr-10 11:29 siat/compare_cross_test.py
 -rw-rw-rw-  2.0 fat     3061 b- defN 23-Apr-10 11:29 siat/concepts_iwencai.py
 -rw-rw-rw-  2.0 fat     4941 b- defN 23-Apr-10 11:29 siat/concepts_kpl.py
 -rw-rw-rw-  2.0 fat      690 b- defN 23-Apr-10 11:29 siat/copyrights.py
 -rw-rw-rw-  2.0 fat    27351 b- defN 23-Apr-10 11:29 siat/cryptocurrency.py
 -rw-rw-rw-  2.0 fat     2669 b- defN 23-Apr-10 11:29 siat/cryptocurrency_test.py
@@ -57,31 +57,33 @@
 -rw-rw-rw-  2.0 fat     2402 b- defN 23-Apr-10 11:29 siat/global_index_test.py
 -rw-rw-rw-  2.0 fat    66109 b- defN 23-Jun-28 03:08 siat/grafix.py
 -rw-rw-rw-  2.0 fat     3150 b- defN 23-Apr-10 11:29 siat/grafix_test.py
 -rw-rw-rw-  2.0 fat    30544 b- defN 23-Apr-10 11:29 siat/holding_risk.py
 -rw-rw-rw-  2.0 fat      474 b- defN 23-Apr-10 11:29 siat/holding_risk_test.py
 -rw-rw-rw-  2.0 fat     3936 b- defN 23-Apr-10 11:29 siat/local_debug_test.py
 -rw-rw-rw-  2.0 fat    31158 b- defN 23-Jun-30 14:53 siat/market_china.py
--rw-rw-rw-  2.0 fat    95641 b- defN 23-Apr-10 13:16 siat/markowitz.py
+-rw-rw-rw-  2.0 fat    95641 b- defN 23-Jul-10 14:04 siat/markowitz.py
 -rw-rw-rw-  2.0 fat     1593 b- defN 23-Apr-10 11:29 siat/markowitz_ccb_test.py
 -rw-rw-rw-  2.0 fat     4032 b- defN 23-Apr-10 11:29 siat/markowitz_ef_test.py
 -rw-rw-rw-  2.0 fat    33046 b- defN 23-Apr-10 11:29 siat/markowitz_old.py
--rw-rw-rw-  2.0 fat    13748 b- defN 23-Jul-09 11:14 siat/markowitz_simple.py
+-rw-rw-rw-  2.0 fat    14160 b- defN 23-Jul-09 13:50 siat/markowitz_simple-20230709.py
+-rw-rw-rw-  2.0 fat    14281 b- defN 23-Jul-12 15:21 siat/markowitz_simple.py
 -rw-rw-rw-  2.0 fat     5818 b- defN 23-Apr-10 11:29 siat/markowitz_test.py
 -rw-rw-rw-  2.0 fat     2193 b- defN 23-Apr-11 06:52 siat/markowitz_test2.py
 -rw-rw-rw-  2.0 fat    86874 b- defN 23-Apr-10 11:29 siat/ml_cases.py
+-rw-rw-rw-  2.0 fat     1673 b- defN 23-Apr-10 11:29 siat/ml_cases_example.py
 -rw-rw-rw-  2.0 fat     1673 b- defN 23-Apr-10 11:29 siat/ml_cases_example1.py
 -rw-rw-rw-  2.0 fat    95158 b- defN 23-May-24 14:28 siat/option_china.py
 -rw-rw-rw-  2.0 fat    16355 b- defN 23-Apr-10 11:29 siat/option_china_test.py
 -rw-rw-rw-  2.0 fat    69625 b- defN 23-Apr-10 11:29 siat/option_pricing.py
 -rw-rw-rw-  2.0 fat     2203 b- defN 23-Apr-10 11:29 siat/option_pricing_test.py
 -rw-rw-rw-  2.0 fat     5908 b- defN 23-Apr-10 11:29 siat/option_sina_api_test.py
 -rw-rw-rw-  2.0 fat     2610 b- defN 23-Apr-10 11:29 siat/proxy_test.py
 -rw-rw-rw-  2.0 fat     1552 b- defN 23-Apr-10 11:29 siat/quandl_test.py
--rw-rw-rw-  2.0 fat    49073 b- defN 23-May-26 05:11 siat/risk_adjusted_return.py
+-rw-rw-rw-  2.0 fat    49425 b- defN 23-Jul-12 15:19 siat/risk_adjusted_return.py
 -rw-rw-rw-  2.0 fat     3416 b- defN 23-Apr-10 11:29 siat/risk_adjusted_return_test.py
 -rw-rw-rw-  2.0 fat    75061 b- defN 23-Apr-10 11:29 siat/risk_evaluation.py
 -rw-rw-rw-  2.0 fat     3731 b- defN 23-Apr-10 11:29 siat/risk_evaluation_test.py
 -rw-rw-rw-  2.0 fat    12304 b- defN 23-Apr-10 11:29 siat/risk_free_rate.py
 -rw-rw-rw-  2.0 fat     4285 b- defN 23-Apr-10 11:29 siat/risk_free_rate_test.py
 -rw-rw-rw-  2.0 fat   101523 b- defN 23-May-27 06:22 siat/sector_china.py
 -rw-rw-rw-  2.0 fat     5843 b- defN 23-Apr-11 14:17 siat/sector_china_test.py
@@ -115,12 +117,12 @@
 -rw-rw-rw-  2.0 fat   118133 b- defN 23-Apr-10 11:29 siat/translate-20230206.py
 -rw-rw-rw-  2.0 fat   121657 b- defN 23-Apr-10 11:29 siat/translate-20230215.py
 -rw-rw-rw-  2.0 fat   134050 b- defN 23-Jul-04 11:47 siat/translate.py
 -rw-rw-rw-  2.0 fat     3936 b- defN 23-Apr-10 11:29 siat/universal_test.py
 -rw-rw-rw-  2.0 fat    51342 b- defN 23-May-11 00:30 siat/valuation_china.py
 -rw-rw-rw-  2.0 fat     1571 b- defN 23-Apr-10 11:29 siat/valuation_market_china_test.py
 -rw-rw-rw-  2.0 fat    14859 b- defN 23-Apr-10 11:29 siat/var_model_validation.py
--rw-rw-rw-  2.0 fat     1429 b- defN 23-Jul-09 11:22 siat-2.3.0.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 23-Jul-09 11:22 siat-2.3.0.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        5 b- defN 23-Jul-09 11:21 siat-2.3.0.dist-info/top_level.txt
-?rw-rw-r--  2.0 fat     9959 b- defN 23-Jul-09 11:22 siat-2.3.0.dist-info/RECORD
-124 files, 7786857 bytes uncompressed, 1693971 bytes compressed:  78.3%
+-rw-rw-rw-  2.0 fat     1422 b- defN 23-Jul-12 15:26 siat-2.3.1.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 23-Jul-12 15:26 siat-2.3.1.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        5 b- defN 23-Jul-12 15:26 siat-2.3.1.dist-info/top_level.txt
+?rw-rw-r--  2.0 fat    10131 b- defN 23-Jul-12 15:26 siat-2.3.1.dist-info/RECORD
+126 files, 7803845 bytes uncompressed, 1699112 bytes compressed:  78.2%
```

## zipnote {}

```diff
@@ -192,26 +192,32 @@
 
 Filename: siat/markowitz_ef_test.py
 Comment: 
 
 Filename: siat/markowitz_old.py
 Comment: 
 
+Filename: siat/markowitz_simple-20230709.py
+Comment: 
+
 Filename: siat/markowitz_simple.py
 Comment: 
 
 Filename: siat/markowitz_test.py
 Comment: 
 
 Filename: siat/markowitz_test2.py
 Comment: 
 
 Filename: siat/ml_cases.py
 Comment: 
 
+Filename: siat/ml_cases_example.py
+Comment: 
+
 Filename: siat/ml_cases_example1.py
 Comment: 
 
 Filename: siat/option_china.py
 Comment: 
 
 Filename: siat/option_china_test.py
@@ -354,20 +360,20 @@
 
 Filename: siat/valuation_market_china_test.py
 Comment: 
 
 Filename: siat/var_model_validation.py
 Comment: 
 
-Filename: siat-2.3.0.dist-info/METADATA
+Filename: siat-2.3.1.dist-info/METADATA
 Comment: 
 
-Filename: siat-2.3.0.dist-info/WHEEL
+Filename: siat-2.3.1.dist-info/WHEEL
 Comment: 
 
-Filename: siat-2.3.0.dist-info/top_level.txt
+Filename: siat-2.3.1.dist-info/top_level.txt
 Comment: 
 
-Filename: siat-2.3.0.dist-info/RECORD
+Filename: siat-2.3.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## siat/allin.py

```diff
@@ -55,15 +55,15 @@
 # 资产的持有风险
 from siat.holding_risk import *
 
 # 投资组合理论
 from siat.markowitz import *
 
 # 投资组合理论自助式示意图
-from siat.markowitz_simple import *
+#from siat.markowitz_simple import *
 
 # 期权定价
 from siat.option_pricing import *
 
 # 风险调整收益
 from siat.risk_adjusted_return import *
```

## siat/common.py

```diff
@@ -1656,17 +1656,20 @@
     将其差作为权重
     """
     df['time_weight']=df.index.asi8
     df0=df.head(1)
     initial_weight=df0['time_weight'][0]
     df['relative_weight']=df['time_weight']-initial_weight
     
+    # 双倍近期优先
+    df['relative_weight2']=df['relative_weight'].apply(lambda x: x*2)
+    
     import numpy as np
     try:
-        tpwavg=np.average(df[colname],weights=df['relative_weight'])
+        tpwavg=np.average(df[colname],weights=df['relative_weight2'])
     except:
         return None
     
     return round(tpwavg,decimals)
 
 #==============================================================================
```

## siat/markowitz.py

```diff
@@ -976,15 +976,15 @@
     plt.scatter(pf_volatilities, pf_returns, c=pf_ratio,cmap='RdYlGn', edgecolors='black',marker='o') 
     #plt.grid(True)
     
     import datetime as dt; stoday=dt.date.today()
     lang = check_language()
     if lang == 'Chinese':    
         plt.colorbar(label='收益率/标准差')
-        plt.title("投资组合: 马科维茨有效(可行)集",fontsize=title_txt_size)
+        plt.title("投资组合: 马科维茨可行(有效)集",fontsize=title_txt_size)
         plt.ylabel("年化收益率",fontsize=ylabel_txt_size)
         
         footnote1="年化收益率标准差-->"
         footnote2="\n\n基于"+pname+"之成份股构造"+str(simulation)+"个投资组合"
         footnote3="\n观察期间："+hstart+"至"+hend
         footnote4="\n来源: Sina/EM/stooq, "+str(stoday)
     else:
```

## siat/markowitz_simple.py

```diff
@@ -59,27 +59,35 @@
 #==============================================================================
 
 # 全局引用，函数中无需再import
 from datetime import date
 import pandas as pd 
 import numpy as np 
 import scipy.optimize as opt
+
 import seaborn as sns
+g=sns.set_style("whitegrid")#横坐标有标线，纵坐标没有标线，背景白色
+g=sns.set_style("darkgrid") #默认，横纵坐标都有标线，组成一个一个格子，背景稍微深色
+g=sns.set_style("dark")#背景稍微深色，没有标线线
+g=sns.set_style("white")#背景白色，没有标线线
+g=sns.set_style("ticks")#xy轴都有非常短的小刻度
+g=sns.despine(offset=30,left=True)#去掉上边和右边的轴线，offset=30表示距离轴线（x轴）的距离,left=True表示左边的轴保留
+g=sns.set(font='SimHei',rc={'figure.figsize':(10,6)})# 图片大小和中文字体设置
 
 #==============================================================================
 if __name__=='__main__':
     components = {
                   'AAPL':'苹果',
                   'AMZN':'亚马逊',
                   'GOOGL':'谷歌',
                   'BABA':'阿里巴巴'
                  }
 
-    start='2016-1-1'    
-    end='2017-12-31'
+    start='2022-1-1'    
+    end='2022-12-31'
     
     risk_free=0.015
     simulation=25000
     price_trend=True
     feasible_set=True
     efficient_frontier=True
     MOP=True #Markowitz Optimized Point
@@ -107,30 +115,24 @@
     efficient_frontier：是否绘制有效边界
     MOP：是否标注MOP点，Markowitz Optimized Point，可能与MSR点不同
     MSR：是否标注MSR点，Maximized Sharpe Ratio，可能与MOP点不同
     ef_adjust：对有效边界曲线微调，使其处于可行集的上边沿
     """
     #获取股票数据
     tickers=list(components)
-    stock_data=get_prices(tickers,start,end)['Close']
+    
+    # 使用Adj Close避免分红分拆引起股价不连续导致结果异常
+    #cprices=get_prices(tickers,start,end)
+    stock_data=get_prices(tickers,start,end)['Adj Close']
     stock_data.rename(columns=components,inplace=True)
      
     stock_data=stock_data.iloc[::-1]
     #stock_data.head()
      
-    #画出收盘价走势图
-    sns.set_style("whitegrid")#横坐标有标线，纵坐标没有标线，背景白色
-    sns.set_style("darkgrid") #默认，横纵坐标都有标线，组成一个一个格子，背景稍微深色
-    sns.set_style("dark")#背景稍微深色，没有标线线
-    sns.set_style("white")#背景白色，没有标线线
-    sns.set_style("ticks")#xy轴都有非常短的小刻度
-    sns.despine(offset=30,left=True)#去掉上边和右边的轴线，offset=30表示距离轴线（x轴）的距离,left=True表示左边的轴保留
-    sns.set(font='SimHei',rc={'figure.figsize':(10,6)})# 图片大小和中文字体设置
-    
-    # 绘制各个成分股票的价格走势，采用股价/起点股价的比值，可一图绘制多只股票
+    # 绘制成分股价格走势，采用股价/起点股价的相对股价，增加可比性
     if price_trend:
         (stock_data/stock_data.iloc[0]).plot()
         titletxt='投资组合的成分股价格走势示意图'
         plt.xlabel('')
         plt.ylabel("价格/起点值")
         plt.title(titletxt)
         plt.show()
@@ -138,14 +140,15 @@
     #------------------------------------------------------------------------------
     # 计算收益率和风险
     # 收益率
     R=stock_data/stock_data.shift(1)-1
     #R.head()
     
     # 对数收益率 
+    stock_data_shift1=stock_data.shift(1)
     log_r=np.log(stock_data/stock_data.shift(1))
     #log_r.head()
     
     # 年化收益率 
     r_annual=np.exp(log_r.mean()*250)-1
     #r_annual
     
@@ -156,26 +159,26 @@
     #------------------------------------------------------------------------------
     # 投资组合的收益和风险
     def gen_weights(n):
         w=np.random.rand(n)
         return w /sum(w)
      
     n=len(list(tickers))
-    w=gen_weights(n)
+    #w=gen_weights(n)
     #list(zip(r_annual.index,w))
     
     #投资组合收益
     def port_ret(w):
         return -np.sum(w*r_annual)
-    #port_ret(w)
+    #pret=port_ret(w)
     
     #投资组合的风险
     def port_std(w):
         return np.sqrt((w.dot(log_r.cov()*250).dot(w.T)))
-    #port_std(w)
+    #pstd=port_std(w)
     
     #若干投资组合的收益和风险
     def gen_ports(times):
         for _ in range(times):#生成不同的组合
             w=gen_weights(n)#每次生成不同的权重
             yield (port_std(w),port_ret(w),w)#计算风险和期望收益 以及组合的权重情况
     
@@ -238,97 +241,107 @@
     if MOP:
         res=opt.minimize(lambda x:-((port_ret(x)-risk_free)/port_std(x)),
                         x0=((1/n),)*n,
                         method='SLSQP',
                         bounds=((0,1),)*n,
                         constraints={"fun":lambda x:(np.sum(x)-1), "type":"eq"})
         
-        ax.scatter(port_std(res.x),port_ret(res.x),label='MOP点',marker="*",c="green",s=300)
+        ax.scatter(port_std(res.x),port_ret(res.x),label='MOP点',marker="*",c="brown",s=300)
         ax.legend()
         fig
         
-        print("\n**MOP portfolio configuration:")     
+        print("\n***马科维茨优化后组合(MOP)配置:")
+        ticker_names=components.values()
         best_proportion=res.x.round(3)
-        best_config = dict(zip(tickers, best_proportion))
+        #best_config = dict(zip(tickers, best_proportion))
+        best_config = dict(zip(ticker_names, best_proportion))
         print(best_config)
         
         #计算期间内投资组合收益率均值
         best_std,best_ret,_=one_ports(best_proportion)
-        print("std =",round(best_std,4),"return =",round(best_ret,2))
+        print("收益率标准差:",round(best_std,4),"\b，投资组合收益率:",round(best_ret,4))
         
+        """
         #绘制MOP组合价格走势
         stock_data2=stock_data.copy()
         stock_data2['MOP']=stock_data2.dot(best_proportion)
         (stock_data2/stock_data2.iloc[0]).plot()
         
         titletxt='投资组合及其成分股价格走势示意图'
         plt.xlabel('')
         plt.ylabel("价格/起点值")
         plt.title(titletxt)
         plt.show()
+        """
         
     if MSR:
         sharpe_max=df['sharpe'].max()
         std_msr=df[df['sharpe']==sharpe_max]['std'].values[0]
         ret_msr=df[df['sharpe']==sharpe_max]['ret'].values[0]
         w_msr=df[df['sharpe']==sharpe_max]['w'].values[0]
         
-        ax.scatter(std_msr,ret_msr,label='MSR点',marker="*",c="black",s=300)
+        ax.scatter(std_msr,ret_msr,label='MSR点',marker="*",c="orange",s=300)
         ax.legend()
         fig
         
-        print("\n**MSR portfolio configuration:")     
+        print("\n***最大夏普比率组合(MSR)配置:")    
+        ticker_names=components.values()
         best_proportion=w_msr
-        best_config = dict(zip(tickers, best_proportion))
+        best_config = dict(zip(ticker_names, best_proportion.round(3)))
         print(best_config)
         
         #计算期间内投资组合收益率均值
         best_std,best_ret,_=one_ports(best_proportion)
-        print("std =",round(best_std,4),"return =",round(best_ret,2))
+        print("收益率标准差:",round(best_std,4),"\b，投资组合收益率:",round(best_ret,4))
         
         #绘制MOP组合价格走势
+        """
         stock_data3=stock_data.copy()
         stock_data3['MOP']=stock_data3.dot(best_proportion)
         (stock_data3/stock_data3.iloc[0]).plot()
         
         titletxt='投资组合及其成分股价格走势示意图'
         plt.xlabel('')
         plt.ylabel("价格/起点值")
         plt.title(titletxt)
         plt.show()
+        """
         
     if MOP or MSR:
         std_min=df['std'].min()
         ret_gmvs=df[df['std']==std_min]['ret'].values[0]
         w_gmvs=df[df['std']==std_min]['w'].values[0]
         
-        ax.scatter(std_min,ret_gmvs,label='GMVS点',marker="^",c="orange",s=300)
+        ax.scatter(std_min,ret_gmvs,label='LVS点',marker="o",c="green",s=300)
         ax.legend()
         fig
         
-        print("\n**GMVS portfolio configuration:")     
+        print("\n***最小波动风险组合(LVS)配置:")    
+        ticker_names=components.values()
         best_proportion=w_gmvs
-        best_config = dict(zip(tickers, best_proportion.round(3)))
+        best_config = dict(zip(ticker_names, best_proportion.round(3)))
         print(best_config)
         
         #计算期间内投资组合收益率均值
         best_std,best_ret,_=one_ports(best_proportion)
-        print("std =",round(best_std,4),"return =",round(best_ret,2))
+        print("收益率标准差:",round(best_std,4),"\b，投资组合收益率:",round(best_ret,4))
         
         #绘制GMVS组合价格走势
+        """
         stock_data4=stock_data.copy()
         stock_data4['GMVS']=stock_data4.dot(best_proportion)
         (stock_data4/stock_data4.iloc[0]).plot()
 
         titletxt='投资组合及其成分股价格走势示意图'
         plt.xlabel('')
         plt.ylabel("价格/起点值")
         plt.title(titletxt)
         plt.show()
-    
+        """
+        
     return 
 
 
 #------------------------------------------------------------------------------
 #------------------------------------------------------------------------------
 #------------------------------------------------------------------------------
 #------------------------------------------------------------------------------
```

## siat/risk_adjusted_return.py

```diff
@@ -1151,21 +1151,24 @@
 #==============================================================================
 #==============================================================================
 
 if __name__=='__main__':
     tickers = ['000858.SZ','600779.SS','000596.SZ','603589.SS']
     start='2022-1-1'
     end='2022-10-31'
-    
     rar_name="sharpe"
     market_index="000300.SS"
     market="China"
+    
+    tickers=['AAPL','01810.HK','000063.SZ']
+    start='2023-1-1'
+    end='2023-7-1'
+    
     RF=False
     window=240
-    
     axhline_value=0
     axhline_label=''
     graph=True
     printout=True
     sortby='tpw_mean'
     
     graph=False
@@ -1233,15 +1236,19 @@
             df=dft
         else:
             df=pd.merge(df,dft,how='outer',left_index=True,right_index=True)
 
     if len(df)==0:
         print("  #Warning(compare_mrar): no data available for the above securities between",start,end)        
         return None
-        
+    
+    # 填充空缺值
+    df.fillna(method='ffill',inplace=True) #使用前值填充
+    df.fillna(method='bfill',inplace=True) #使用后值填充
+    
     #绘制多条曲线
     rar_list=['treynor','sortino','sharpe','alpha']
     rar_list_e=['Treynor Ratio','Sortino Ratio','Sharpe Ratio','Jensen alpha']
     #rar_list_c=['特雷诺比率','索替诺比率','夏普比率','阿尔法指数']
     rar_list_c=['特雷诺比率','索替诺比率','夏普比率','阿尔法指标']
     
     pos=rar_list.index(rar_name)
@@ -1252,20 +1259,22 @@
     if lang == 'English':
         
         y_label=rar_list_e[pos]
         x_label="Source: sina/stooq, "+str(today)
         title_txt="Compare Multiple Risk-adjusted Return Performance"
     else:
         y_label=rar_list_c[pos]
-        x_label="数据来源: 新浪/stooq，"+str(today)
+        x_label="数据来源: 新浪/stooq/Yahoo，"+str(today)
         title_txt="比较多只证券的风险调整收益滚动指标"
 
     # 是否绘图
     if graph:
-        draw_lines(df,y_label,x_label, \
+        startpd=pd.to_datetime(start)
+        df1=df[df.index >= startpd]        
+        draw_lines(df1,y_label,x_label, \
                    axhline_value=axhline_value,axhline_label=axhline_label, \
                    title_txt=title_txt,data_label=False)
 
     if printout:
         
         dfcols=list(df)
         for c in dfcols:
@@ -1281,15 +1290,15 @@
         elif sortby=='median':
             sortby_txt='按推荐标记+中位数值降序排列'
         else:
             pass
         
         title_txt='*** '+title_txt+'：'+y_label+'，'+sortby_txt
         additional_note="*** 注：列表仅显示有星号标记或特定数量的证券。"
-        footnote='比较期间：'+start+'至'+end
+        footnote='趋势方向表示的期间范围：'+start+'至'+end
         descriptive_statistics(df,title_txt,additional_note+footnote,decimals=4, \
                                sortby=sortby,recommend_only=True)
 
     return df
 
 if __name__=='__main__':
     tickers = ['000858.SZ','600779.SS','000596.SZ','603589.SS','000001.SS']
```

## Comparing `siat-2.3.0.dist-info/METADATA` & `siat-2.3.1.dist-info/METADATA`

 * *Files 4% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 Metadata-Version: 2.1
 Name: siat
-Version: 2.3.0
+Version: 2.3.1
 Summary: Securities Investment Analysis Tools (siat)
 Home-page: https://pypi.org/project/siat/
-Author: Prof. WANG Dehong, Business School, BFSU (北京外国语大学 国际商学院 王德宏 教授)
+Author: Prof. WANG Dehong, Business School, BFSU (北京外国语大学 国际商学院 王德宏)
 Author-email: wdehong2000@163.com
 License: Copyright (C) WANG Dehong, 2023. For educational purpose only!
 Requires-Dist: pandas-datareader
 Requires-Dist: yfinance
 Requires-Dist: plotly-express
 Requires-Dist: akshare (==1.10.3)
 Requires-Dist: urllib3 (==1.25.11)
```

## Comparing `siat-2.3.0.dist-info/RECORD` & `siat-2.3.1.dist-info/RECORD`

 * *Files 7% similar despite different names*

```diff
@@ -1,9 +1,9 @@
 siat/__init__.py,sha256=2dNozwJxztiXwgRY76YQjykPJwAK1SnpN1nNON42c4k,840
-siat/allin.py,sha256=ZhmWuTZvotYUj4nRd3ZJXd2QL81qfJafSut4KvDOD8A,2209
+siat/allin.py,sha256=ApPXaJ_ijRrJzr77gXI4Lg7zoyTFdXUuPMRd8EXtMFs,2210
 siat/alpha_vantage_test.py,sha256=tKr-vmuFH3CZAqwmISz6jzjPHzV1JJl3sPfZdz8aTfM,747
 siat/assets_liquidity.py,sha256=ma-1rO_t_Mg3j_suWcySHkBoAl-H71CR1dm7iEGAfwM,28555
 siat/assets_liquidity_test.py,sha256=UWk6HIUlizU7LQZ890fGx8LwU1jMMrIZswg8cFUJWZ8,1285
 siat/barrons_scraping_test.py,sha256=jSRVPxyYylcgG3fAsuqE-9WH3sDfJ3CdZUcU8VBVdoU,10110
 siat/beta_adjustment.py,sha256=PW1DgBB17u8jjaDl4Bi6pEQ5RE_tIjg3kZB1xP8l9KI,36597
 siat/beta_adjustment_china.py,sha256=FX5xdGHiVKo0f03RhWmkz398t5VbkvL8Eyw2xLz5Lvw,20433
 siat/beta_adjustment_test.py,sha256=nBhvQQfqxooCHjy5hL0a8V0ZC58BjuCZVFpqpWpHeF0,2467
@@ -11,15 +11,15 @@
 siat/bond.py,sha256=DrspW0zbj1YJm-gMl8jVJF7qNiciSM9sxIBsHk-gyaE,99528
 siat/bond_base.py,sha256=mY1TscUH2kWzsR3Cnh5ea0Xu7-Nc8ZyFupraRipi4BM,24155
 siat/bond_china.py,sha256=ct28F7d6V0m9S3S-t-0lW1ZnSQYSCZhmsCHcZrPZno8,3002
 siat/bond_test.py,sha256=yUOFw7ddGU-kb1rJdnsjkJWziDNgUR7OLDA7F7Ub91A,5246
 siat/capm_beta.py,sha256=L40UbrSU4QQ5CxmEu8CpLT5WptsOUOfDRF7Pxdw6HZs,28499
 siat/capm_beta_test.py,sha256=ImR0c5mc4hIl714XmHztdl7qg8v1E2lycKyiqnFj6qs,1745
 siat/cmat_commons.py,sha256=Nj9Kf0alywaztVoMVeVVL_EZk5jRERJy8R8kBw88_Tg,38116
-siat/common.py,sha256=O1bBT3EHGCUloIEI-rEw_xvzDLAHa6WYe5GDTuEDGV4,65280
+siat/common.py,sha256=23MblF1_r4U8fCI9hVhA0tFaU6hIqCYQrDJvartdCnk,65384
 siat/compare_cross.py,sha256=XXLLBFz66vkrup50ehyP7jR5IyHUB3zqEJGCzWibVYw,20806
 siat/compare_cross_test.py,sha256=xra5XYmQGEtfIZL2h-GssdH2hLdFIhG3eoCrkDrL3gY,3473
 siat/concepts_iwencai.py,sha256=m1YEDtECRT6FqtzlKm91pt2I9d3Z_XoP59BtWdRdu8I,3061
 siat/concepts_kpl.py,sha256=SJ9UaJp5i79EXKZ3dPa_vBEoG_zgl1Ig5rZAm-ubgM4,4941
 siat/copyrights.py,sha256=YMLjZb328YpFMR-s_GUu0HBgeGce3pV7DgRut8S3I7w,690
 siat/cryptocurrency.py,sha256=SKh_S85cqd2tRgKBKls1Fpd6HdFd9JfmUTCa2e3mpsE,27351
 siat/cryptocurrency_test.py,sha256=3AikTNJ7j-HwLGLIYEfyXZ3bLVuLeru9mwiwHQi2SdA,2669
@@ -56,31 +56,33 @@
 siat/global_index_test.py,sha256=hnFp3wqqzzL-kAP8mgxDZ54Bd5Ijf6ENi5YJlGBgcXw,2402
 siat/grafix.py,sha256=X31OzzrcGTZfKH92h4DB-DI9XJTUaAHVPRugKvHfwLQ,66109
 siat/grafix_test.py,sha256=kXvcpLgQNO7wd30g_bWljLj5UH7bIVI0_dUtXbfiKR0,3150
 siat/holding_risk.py,sha256=108tiI7DDl8uUZkyUiq6Y-McKeim1mxYsgqgk7CcXw8,30544
 siat/holding_risk_test.py,sha256=FRlw_9wFG98BYcg_cSj95HX5WZ1TvkGaOUdXD7-V86s,474
 siat/local_debug_test.py,sha256=CDAOffW1Rvs-TcNN5giWVvHMlch1w4dp-w5SIV9jXL0,3936
 siat/market_china.py,sha256=5dV-i5ngEdVXmbXbAghpxdnUIYzFV3l0CuttZcXCGdc,31158
-siat/markowitz.py,sha256=g3P-UripHV_VwtQetdGaPtfmRsFUxQICqmtF4Pp6C3k,95641
+siat/markowitz.py,sha256=ytewWDDnhR9LEgNGMfjOLzrgdiLVA9HfofhjKRiQ4Fs,95641
 siat/markowitz_ccb_test.py,sha256=xBkkoaNHdq9KSUrNuHGgKTdNYUvgi84kNYcf719eoyE,1593
 siat/markowitz_ef_test.py,sha256=wjNlICkgRIqnonPeSIHo4Mu2GRtb9dr21wDt2kMNEcI,4032
 siat/markowitz_old.py,sha256=Lf7O_4QWT8RsdkHiUyc_7kKY3eZjKDtFR89Fz3pwYnY,33046
-siat/markowitz_simple.py,sha256=tHmk7DnqoJWVBBXdcY3ezKwUVdNdu_Tm5QpJvBMGOT0,13748
+siat/markowitz_simple-20230709.py,sha256=fSzRrX_3HN3lFGJ3PntJFjfHAOc7vjEUZ6T1uQGdc64,14160
+siat/markowitz_simple.py,sha256=56l2tLOCaALYTgSZBOLWzyq5ZvSlcnW7Hp0UyScwYoM,14281
 siat/markowitz_test.py,sha256=fDXoPp6DrKeneYjd0lbb0KfYUJj-VcOvVaPlfsIOstw,5818
 siat/markowitz_test2.py,sha256=FcVZqYU5va4567WGUVUJ7cMQdVbBGxeBAz82Y3BhCTI,2193
 siat/ml_cases.py,sha256=FYDk0O7l9hhHlbrlOVGgbH-h2DA503lhKFi9XugH1f0,86874
+siat/ml_cases_example.py,sha256=xRGb3YTQEDTOnaWNzZN_myU5umQnA2RdMNiPrxTmn9c,1673
 siat/ml_cases_example1.py,sha256=xRGb3YTQEDTOnaWNzZN_myU5umQnA2RdMNiPrxTmn9c,1673
 siat/option_china.py,sha256=Oorj8Bmrl22kuLOkEiqnTPwe37Jw-Vo3AhICQX4uwEc,95158
 siat/option_china_test.py,sha256=UQ-YUHUjoGBQyanLcM-yzqeEIUQP_gCQIeT0W6rnUnA,16355
 siat/option_pricing.py,sha256=ZvOziCkXODUjqSw2Q7Ux_gepw9UQaGMgvbI_YuceyX8,69625
 siat/option_pricing_test.py,sha256=eeorV5Ja5vjlRXnP6fWJHetGU5Vb8SnLopkC6RV3GfA,2203
 siat/option_sina_api_test.py,sha256=dn-k_wrQnAaNKHoROvWJEc7lqlU0bwiV2Aa4usWAFGM,5908
 siat/proxy_test.py,sha256=erQJrmGs2X46z8Gb1h-7GYQ0rTUcaR8dxHExWoBz2eM,2610
 siat/quandl_test.py,sha256=EcPoXnLuqzPl5dKyVEZi3j3PJZFpsnU_iNPhLWC9p-A,1552
-siat/risk_adjusted_return.py,sha256=24eQIjOdOuRp5yl_DH9WCuk_R5M7mlJj0uTVcKw1SuE,49073
+siat/risk_adjusted_return.py,sha256=bOnlMAp8d1cEqXU_PBuW0DeqTJZhPxtXYJ7XN0mL2WY,49425
 siat/risk_adjusted_return_test.py,sha256=m_VHL5AtT74cJv5i7taTeTfnkX48y0AFJk5phawyYWg,3416
 siat/risk_evaluation.py,sha256=lCDqCaSEppH0MFPFg-P14IYcF3IJqILbPfDmzf_AfcY,75061
 siat/risk_evaluation_test.py,sha256=YEXM96gKzTfwN4U61AS4Rr1tV7KgUvn4rRC6f3iMw9s,3731
 siat/risk_free_rate.py,sha256=r62zCl1qbI4lJU17GsgM-OmVx9oo3dltXeZVCNd6Uxg,12304
 siat/risk_free_rate_test.py,sha256=CpmhUf8aEAEZeNu4gvWP2Mz2dLoIgBX5bI41vfUBEr8,4285
 siat/sector_china.py,sha256=sHd7nlYWCK0SWAZbu-BLn-3vNPe2E8OFaDFYF67Hoho,101523
 siat/sector_china_test.py,sha256=1wq7ef8Bb_L8F0h0W6FvyBrIcBTEbrTV7hljtpj49U4,5843
@@ -114,11 +116,11 @@
 siat/translate-20230206.py,sha256=-vtI125WyaJhmPotOpDAmclt_XnYVaWU9ByLWZ6FyYE,118133
 siat/translate-20230215.py,sha256=TJgtPE3n8IjljmZ4Pefy8dmHoNdFF-1zpML6BhA9FKE,121657
 siat/translate.py,sha256=pFi_U1_LLzcq6rE9ns0Hr0fLYjzB_n2sGLapdbLlVxw,134050
 siat/universal_test.py,sha256=CDAOffW1Rvs-TcNN5giWVvHMlch1w4dp-w5SIV9jXL0,3936
 siat/valuation_china.py,sha256=gYYXeT9bBPyQ251TCsYlibWcu6JA8x-YOKqLUEeLE7U,51342
 siat/valuation_market_china_test.py,sha256=gbJ0ioauuo4koTPH6WKUkqcXiQPafnbhU5eKJ6lpdLA,1571
 siat/var_model_validation.py,sha256=zB_Skk_tmzIR15l6oAW3am4HBGVIG-eZ8gJhCdXZ8Qw,14859
-siat-2.3.0.dist-info/METADATA,sha256=HEihRI_gQaEfp2RJSCIMinGACKDI4zOAa4uB63nx-GM,1429
-siat-2.3.0.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-siat-2.3.0.dist-info/top_level.txt,sha256=r1cVyL7AIKqeAmEJjNR8FMT20OmEzufDstC2gv3NvEY,5
-siat-2.3.0.dist-info/RECORD,,
+siat-2.3.1.dist-info/METADATA,sha256=FBHTIs731m-UHEPmDj_o1VRWqPmqBI2hhNVUbg_UxKE,1422
+siat-2.3.1.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+siat-2.3.1.dist-info/top_level.txt,sha256=r1cVyL7AIKqeAmEJjNR8FMT20OmEzufDstC2gv3NvEY,5
+siat-2.3.1.dist-info/RECORD,,
```

