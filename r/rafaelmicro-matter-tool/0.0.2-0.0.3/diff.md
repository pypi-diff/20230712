# Comparing `tmp/rafaelmicro_matter_tool-0.0.2-py2.py3-none-any.whl.zip` & `tmp/rafaelmicro_matter_tool-0.0.3-py2.py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,13 +1,13 @@
-Zip file size: 23735 bytes, number of entries: 30
--rw-rw-r--  2.0 unx      418 b- defN 23-Jul-07 03:18 matter_tool/__init__.py
+Zip file size: 23998 bytes, number of entries: 30
+-rw-rw-r--  2.0 unx      418 b- defN 23-Jul-12 02:58 matter_tool/__init__.py
 -rw-rw-r--  2.0 unx      189 b- defN 23-Jun-29 02:43 matter_tool/__main__.py
 -rw-rw-r--  2.0 unx    10361 b- defN 23-Jul-06 02:57 matter_tool/cli.py
 -rw-rw-r--  2.0 unx      339 b- defN 23-Jun-29 02:43 matter_tool/error.py
--rw-rw-r--  2.0 unx    47662 b- defN 23-Jul-06 05:29 matter_tool/api/ChipToolMgr.py
+-rw-rw-r--  2.0 unx    47787 b- defN 23-Jul-10 09:27 matter_tool/api/ChipToolMgr.py
 -rw-rw-r--  2.0 unx     1962 b- defN 23-Jul-05 16:05 matter_tool/api/OTBRMgr.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-Jun-29 02:43 matter_tool/api/__init__.py
 -rw-rw-r--  2.0 unx     2802 b- defN 23-Jul-06 03:17 matter_tool/api/struct/ChipToolData.py
 -rw-rw-r--  2.0 unx      870 b- defN 23-Jun-30 05:49 matter_tool/api/struct/OTBRData.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-Jun-29 02:43 matter_tool/api/struct/__init__.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-Jun-29 02:43 matter_tool/extlib/__init__.py
 -rw-rw-r--  2.0 unx     1098 b- defN 23-Jul-05 16:58 matter_tool/extlib/CMDAccess/CMDAccess.py
@@ -17,16 +17,16 @@
 -rw-rw-r--  2.0 unx        0 b- defN 23-Jun-29 02:43 matter_tool/extlib/CMDAccess/struct/__init__.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-Jul-06 14:41 matter_tool/extlib/MgmtExt/__init__.py
 -rw-rw-r--  2.0 unx     2274 b- defN 23-Jul-05 17:31 matter_tool/extlib/MgmtExt/log.py
 -rw-rw-r--  2.0 unx      759 b- defN 23-Jul-05 15:50 matter_tool/extlib/MgmtExt/time.py
 -rw-rw-r--  2.0 unx     1114 b- defN 23-Jul-05 10:01 matter_tool/extlib/TyperExt/TyperExt.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-Jun-29 02:43 matter_tool/extlib/TyperExt/__init__.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-Jun-29 02:43 matter_tool/module/__init__.py
--rw-rw-r--  2.0 unx     4536 b- defN 23-Jul-05 13:41 matter_tool/module/data/Database.py
--rw-rw-r--  2.0 unx    13469 b- defN 23-Jul-05 16:51 matter_tool/module/data/MatterDM.py
+-rw-rw-r--  2.0 unx     5413 b- defN 23-Jul-10 07:59 matter_tool/module/data/Database.py
+-rw-rw-r--  2.0 unx    13615 b- defN 23-Jul-10 09:23 matter_tool/module/data/MatterDM.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-Jun-29 02:43 matter_tool/module/data/__init__.py
--rw-rw-r--  2.0 unx     9762 b- defN 23-Jul-07 03:19 rafaelmicro_matter_tool-0.0.2.dist-info/METADATA
--rw-rw-r--  2.0 unx      110 b- defN 23-Jul-07 03:19 rafaelmicro_matter_tool-0.0.2.dist-info/WHEEL
--rw-rw-r--  2.0 unx       77 b- defN 23-Jul-07 03:19 rafaelmicro_matter_tool-0.0.2.dist-info/entry_points.txt
--rw-rw-r--  2.0 unx       12 b- defN 23-Jul-07 03:19 rafaelmicro_matter_tool-0.0.2.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2715 b- defN 23-Jul-07 03:19 rafaelmicro_matter_tool-0.0.2.dist-info/RECORD
-30 files, 101767 bytes uncompressed, 19243 bytes compressed:  81.1%
+-rw-rw-r--  2.0 unx     9762 b- defN 23-Jul-12 02:58 rafaelmicro_matter_tool-0.0.3.dist-info/METADATA
+-rw-rw-r--  2.0 unx      110 b- defN 23-Jul-12 02:58 rafaelmicro_matter_tool-0.0.3.dist-info/WHEEL
+-rw-rw-r--  2.0 unx       77 b- defN 23-Jul-12 02:58 rafaelmicro_matter_tool-0.0.3.dist-info/entry_points.txt
+-rw-rw-r--  2.0 unx       12 b- defN 23-Jul-12 02:58 rafaelmicro_matter_tool-0.0.3.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     2715 b- defN 23-Jul-12 02:58 rafaelmicro_matter_tool-0.0.3.dist-info/RECORD
+30 files, 102915 bytes uncompressed, 19506 bytes compressed:  81.0%
```

## zipnote {}

```diff
@@ -69,23 +69,23 @@
 
 Filename: matter_tool/module/data/MatterDM.py
 Comment: 
 
 Filename: matter_tool/module/data/__init__.py
 Comment: 
 
-Filename: rafaelmicro_matter_tool-0.0.2.dist-info/METADATA
+Filename: rafaelmicro_matter_tool-0.0.3.dist-info/METADATA
 Comment: 
 
-Filename: rafaelmicro_matter_tool-0.0.2.dist-info/WHEEL
+Filename: rafaelmicro_matter_tool-0.0.3.dist-info/WHEEL
 Comment: 
 
-Filename: rafaelmicro_matter_tool-0.0.2.dist-info/entry_points.txt
+Filename: rafaelmicro_matter_tool-0.0.3.dist-info/entry_points.txt
 Comment: 
 
-Filename: rafaelmicro_matter_tool-0.0.2.dist-info/top_level.txt
+Filename: rafaelmicro_matter_tool-0.0.3.dist-info/top_level.txt
 Comment: 
 
-Filename: rafaelmicro_matter_tool-0.0.2.dist-info/RECORD
+Filename: rafaelmicro_matter_tool-0.0.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## matter_tool/__init__.py

```diff
@@ -1,12 +1,12 @@
 """Top-level package for RP To-Do."""
 # rptodo/__init__.py
 
 __app_name__ = "matter-tool"
-__version__ = "0.0.2"
+__version__ = "0.0.3"
 
 (
     SUCCESS,
     DIR_ERROR,
     FILE_ERROR,
     DB_READ_ERROR,
     DB_WRITE_ERROR,
```

## matter_tool/api/ChipToolMgr.py

```diff
@@ -109,14 +109,15 @@
         self._logger.info("=== [Matter Stack] Access Control List ===")
         self.clear_failed_data()
         acl_list = self._MatterDM.get_fully_acl_list()
         name = []
         fabric = []
         nodeid = []
         target_name = []
+
         target_id = []
         privilege = []
         auto_mode = []
         for acl in acl_list["matter"]["acl"]:
             name.append(acl["name"])
             fabric.append(acl["fabric"])
             nodeid.append(acl["nodeid"])
@@ -236,17 +237,18 @@
         delete_count = self._MatterDM.delete_multi_match("group_mapper", {
             "name": name,
             "target_id": str(nodeid),
             "target_endpoint": str(endpoint),
         })
         self._logger.info(str(delete_count))
 
-    def delete_group_acl(self, name, fabric, nodeid, auto_mode):
+    def delete_group_acl(self, name, fabric, nodeid, target_name, auto_mode):
         self._MatterDM.delete_multi_match("acl", {
-            "name": name, "fabric": fabric, "nodeid": nodeid, "auto_mode": auto_mode
+            "name": name, "fabric": fabric, "nodeid": nodeid,
+            "auto_mode": auto_mode, "target_name": target_name
         })
 
     def clear_profile(self, node):
         self._MatterDM.delete_match("node", "name", node["name"])
         self._MatterDM.delete_match("acl", "name", node["name"])
         self._MatterDM.delete_match("acl", "target_name", node["name"])
         self._MatterDM.delete_match("binding", "name", node["name"])
@@ -473,37 +475,29 @@
             privilege=3, auto_mode=3
         )
         self._ChipToolMgr.apply_acl_profile(acl)
 
     def unbind_group_acl(self, node, group) -> None:
         self._ChipToolMgr.delete_group_acl(
             name=node["name"], fabric=node["fabric"],
-            nodeid=node["nodeid"], auto_mode=3,
+            nodeid=node["nodeid"], auto_mode=3, target_name=group["name"],
         )
         acl = self._ChipToolMgr.get_acl(node["name"])
 
         self._logger.debug(json.dumps(acl))
         status, result = self.handle_command(
             ChipToolhelpper.QueryCMDMapper.ACCESS_CONTROL,
             acl=self.acl_json_passer(acl),
             light_id=node["nodeid"],
             endpoint=0
         )
         if not (status == 0):
             self._logger.info("Execute time: " + str(stop_timmer("CMD")))
             self._logger.error("set light ACL failed")
 
-        acl = self._ChipToolMgr.new_acl_profile(
-            name=node["name"], nodeid=node["nodeid"], fabric=node["fabric"],
-            target_name=group["name"], target_id=group["nodeid"],
-            privilege=3, auto_mode=3
-        )
-
-        self._ChipToolMgr.apply_acl_profile(acl)
-
 
 class ChipToolSwitchMgr:
     @dataclass
     class GroupKeySet():
         groupKeySetID: int
         groupKeySecurityPolicy: int
         epochKey0: str
@@ -774,14 +768,21 @@
         group = self._ChipToolMgr.new_group_profile(name=group_name)
 
         self._logger.info("Stage: Create Group")
         status, result = self.handle_command(
             ChipToolhelpper.QueryCMDMapper.CREATE_GROUP,
             name=group.name, group_id=group.group_id)
         if not (status == 0):
+            for row in result:
+                match = re.search(
+                    r'CHIP Error 0x0000001F: invalid list length', row)
+                if match:
+                    self._logger.warning(
+                        "chip-tool groups' count has reached the limit")
+            self._ChipToolMgr.delete_group(group_name)
             self._logger.info("Execute time: " + str(stop_timmer("CMD")))
             self._logger.error("Create Group failed")
 
         self._logger.info("Stage: Create Keyset")
         status, result = self.handle_command(
             ChipToolhelpper.QueryCMDMapper.CREATE_KEYSET,
             group_keyset_id=group.group_keyset_id, groupKeySecurityPolicy=0,
```

## matter_tool/module/data/Database.py

```diff
@@ -105,14 +105,31 @@
             if (profile[group][cluster][idx][key] == data[key]):
                 profile[group][cluster][idx] = data
                 with self._db_path.open("w") as db:
                     db.write(json.dumps(profile))
                 return DBResponse(profile, SUCCESS)
         return DBResponse(profile, DB_WRITE_ERROR)
 
+    def modify_matter_profile_with_muiti(self, group, cluster, keys, data) -> DBResponse:
+        profile = self.read_matter_cluster(group, cluster)
+        data = dataclasses.asdict(data)
+        self._logger.debug(json.dumps((group, cluster)))
+        self._logger.debug(json.dumps(data))
+        for idx in range(0, len(profile[group][cluster])):
+            match_counter = 0
+            for key, val in keys.items():
+                if (str(profile[group][cluster][idx][key]) == str(val)):
+                    match_counter += 1
+                    if (match_counter == len(keys)):
+                        profile[group][cluster][idx] = data
+                        with self._db_path.open("w") as db:
+                            db.write(json.dumps(profile))
+                        return DBResponse(profile, SUCCESS)
+        return DBResponse(profile, DB_WRITE_ERROR)
+
     def update_matter_profile(self, group, cluster, data) -> DBResponse:
         profile = self.read_matter_cluster(group, cluster)
         profile[group][cluster] = data
         with self._db_path.open("w") as db:
             db.write(json.dumps(profile))
         return DBResponse(profile, SUCCESS)
```

## matter_tool/module/data/MatterDM.py

```diff
@@ -1,13 +1,14 @@
 from pathlib import Path
 from ...error import DB_WRITE_ERROR
 from .Database import DatabaseHandler
 from ...extlib.TyperExt.TyperExt import TyperExt
 from ...extlib.MgmtExt.log import get_logger
 from dataclasses import dataclass
+import dataclasses
 
 from .Database import DEFAULT_DB_FILE_PATH
 import json
 import secrets
 from enum import Enum
 
 
@@ -168,16 +169,19 @@
         read = self._db.modify_matter_profile("matter", "node", "nodeid", node)
         if read.error == DB_WRITE_ERROR:
             self._logger.error("DB_WRITE_ERROR")
             return read.error
 
     def update_group_mapper(self, group_mapper: MatterGroupMapper):
         self.check_group_mapper_vailed(group_mapper)
-        read = self._db.modify_matter_profile(
-            "matter", "group_mapper", "group_id", group_mapper)
+        keys = {
+            "group_id": group_mapper.group_id,
+            "target_name": group_mapper.target_name}
+        read = self._db.modify_matter_profile_with_muiti(
+            "matter", "group_mapper", keys, group_mapper)
         if read.error == DB_WRITE_ERROR:
             self._logger.error("DB_WRITE_ERROR")
             return read.error
 
     def check_node_vailed(self, node: MatterNode):
         self.update_check_list()
         if node.nodeid == -1:
@@ -200,15 +204,15 @@
         node = self.MatterNode(
             name=kwargs['name'], devicetype=kwargs["devicetype"],
             nodeid=-1, status="Init", fabric=-1
         )
         self.update_check_list()
         status = self.check_node_name_exist(node.name)
         if status == 1:
-            self._logger.error("Invailed device name")
+            self._logger.error("device name are existed")
         node.nodeid = self.generate_nodeid()
         if node.nodeid == -1:
             self._logger.error("Invailed nodeid")
         return node
 
     def create_acl(self, *args, **kwargs):
         acl = self.MatterACL(
@@ -230,17 +234,17 @@
         group = self.MatterGroup(
             name=kwargs['name'], group_id=-1, group_keyset_id=-1,
             epochkey0=secrets.token_bytes(16).hex(),
             epochkey1=secrets.token_bytes(16).hex(),
             epochkey2=secrets.token_bytes(16).hex(),
         )
         self.update_check_list()
-        status = self.check_node_name_exist(group.name)
+        status = self.check_group_mapper_name_exist(group.name)
         if status == 1:
-            self._logger.error("Invailed Invailed group name")
+            self._logger.error("group name are existed")
 
         group.group_id = self.generate_groupid()
         if group.group_id == -1:
             self._logger.error("generate groupid failed")
 
         group.group_keyset_id = self.generate_group_keyset_id()
         if group.group_keyset_id == -1:
```

## Comparing `rafaelmicro_matter_tool-0.0.2.dist-info/METADATA` & `rafaelmicro_matter_tool-0.0.3.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: rafaelmicro-matter-tool
-Version: 0.0.2
+Version: 0.0.3
 Summary: Matter controller cli-tool (Support by Rafael Micro)
 Home-page: UNKNOWN
 Author: resghst
 Author-email: hank181017@gmail.com
 License: UNKNOWN
 Download-URL: https://pypi.org/project/rafalmicro-matter-tool/
 Platform: UNKNOWN
```

## Comparing `rafaelmicro_matter_tool-0.0.2.dist-info/RECORD` & `rafaelmicro_matter_tool-0.0.3.dist-info/RECORD`

 * *Files 7% similar despite different names*

```diff
@@ -1,12 +1,12 @@
-matter_tool/__init__.py,sha256=ZS7iX1ujopnd57NMgGmoXEWeS6e-1prhMyrYx4Cy5w8,418
+matter_tool/__init__.py,sha256=B_UQABmVX8yGaxxkyF32_zCrjd4EyxCr9AzzK03nhM4,418
 matter_tool/__main__.py,sha256=AOTaQPmDcDrCSOXqRpTamyOScW5YIIGpseBx6faH-YU,189
 matter_tool/cli.py,sha256=L38RsN-gPK9PNFJ94uCtUE5EW7g6-ZFnUmTMBMEqmyE,10361
 matter_tool/error.py,sha256=iDpLk_Avwdh6_vDXRyF2of8lqF3TqpKDgWwIGu3wrZg,339
-matter_tool/api/ChipToolMgr.py,sha256=-6h_7uq4J4qValzCPgsQL-BbhsQ7W88fnmx86YKXyXs,47662
+matter_tool/api/ChipToolMgr.py,sha256=Q2ekyZEHLB8ssuYtFpDuYW-CFip6mkm428MBG9cUNKU,47787
 matter_tool/api/OTBRMgr.py,sha256=HEbbHWKmnFtuqUmQBZ61RebbS6gT8dTlkjko3bsDq6Q,1962
 matter_tool/api/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 matter_tool/api/struct/ChipToolData.py,sha256=T0Cu6jimJDFrrCvY2ZQTtTnmKzEHKi-zUqkXON96YTY,2802
 matter_tool/api/struct/OTBRData.py,sha256=0OinkUVF7KJxOkZ2q6y08ZgoXSM-eyVd0F-vNQWFQpk,870
 matter_tool/api/struct/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 matter_tool/extlib/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 matter_tool/extlib/CMDAccess/CMDAccess.py,sha256=l1nDkz0PCWyn1RqcM4YiBJm8fo7rxSoBcrpyTZKjKCs,1098
@@ -16,15 +16,15 @@
 matter_tool/extlib/CMDAccess/struct/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 matter_tool/extlib/MgmtExt/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 matter_tool/extlib/MgmtExt/log.py,sha256=NMQeRBf8GSpLZIZBmUu7eC9Pg2zOM4IRPB3sbSORUKU,2274
 matter_tool/extlib/MgmtExt/time.py,sha256=fR2yOwoG9G_lTqjy5MHwCWp_se1YfEvCUtegwJlx_Xk,759
 matter_tool/extlib/TyperExt/TyperExt.py,sha256=C35ZyWnMEKY_QyWN-q05D74dUv7E9xGupR8adlWxFaQ,1114
 matter_tool/extlib/TyperExt/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 matter_tool/module/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-matter_tool/module/data/Database.py,sha256=NZL8k6d5oT5bD5qWmtkpTTe5hvO5LpQJ2lm3VvVcxX4,4536
-matter_tool/module/data/MatterDM.py,sha256=Rt6f0FanKrnGnJiUo3MwnfPlUaOOuEHmEZlaerC_3-g,13469
+matter_tool/module/data/Database.py,sha256=ZjPjMqd8YuMHQL9j97KMjjLIcJigK4qf6lAGf2lJsD8,5413
+matter_tool/module/data/MatterDM.py,sha256=1I-BcBUrgFA9BzD1Bjftg75x02-yt-DtGeJKMigBGUM,13615
 matter_tool/module/data/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-rafaelmicro_matter_tool-0.0.2.dist-info/METADATA,sha256=u3cOhOq-h_ywT4SjIwLRY0-A3x6bQmULpmOpjFlOCKk,9762
-rafaelmicro_matter_tool-0.0.2.dist-info/WHEEL,sha256=z9j0xAa_JmUKMpmz72K0ZGALSM_n-wQVmGbleXx2VHg,110
-rafaelmicro_matter_tool-0.0.2.dist-info/entry_points.txt,sha256=efHmi8gFkQcErp66sU2GEusZuCrxBJGzi5kstSs1EMw,77
-rafaelmicro_matter_tool-0.0.2.dist-info/top_level.txt,sha256=8qnJ1GgCm-D7Agcc2F8NgAmAdt2Fhxni7yOUZAaQH6o,12
-rafaelmicro_matter_tool-0.0.2.dist-info/RECORD,,
+rafaelmicro_matter_tool-0.0.3.dist-info/METADATA,sha256=QaX9-TErK8dk55bpLKzTjPCzYEuUqvG6qRbD9EkwkpY,9762
+rafaelmicro_matter_tool-0.0.3.dist-info/WHEEL,sha256=z9j0xAa_JmUKMpmz72K0ZGALSM_n-wQVmGbleXx2VHg,110
+rafaelmicro_matter_tool-0.0.3.dist-info/entry_points.txt,sha256=efHmi8gFkQcErp66sU2GEusZuCrxBJGzi5kstSs1EMw,77
+rafaelmicro_matter_tool-0.0.3.dist-info/top_level.txt,sha256=8qnJ1GgCm-D7Agcc2F8NgAmAdt2Fhxni7yOUZAaQH6o,12
+rafaelmicro_matter_tool-0.0.3.dist-info/RECORD,,
```

